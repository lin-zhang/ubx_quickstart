#Microblx Tutorial

============
##What is Microblx?
Microblx is a lightweight, dynamic, reflective, hard real-time safe function block framework:

1. Pure C, no external dependencies
2. Lua scripting for system configuration and deployment
3. Standard block and type library
4. Web interface function block to introspect and control blocks
5. Automatic block stub code generation
6. Generic Lua scriptable function block
7. Dynamic type handling, no code-generation
8. Similar to IEC-61508 and IEC-61499 functions blocks

============

##Quick start guide

This is a Microblx tutorial explaining installation and usage on Ubuntu 14.04.

###Installation

Get some programs from aptitude:
	
	$ sudo apt-get update
	$ sudo apt-get upgrade
	$ sudo apt-get install clang gcc make git libluajit-5.1-dev luajit

Clone the microblx repository:

	$ git clone https://github.com/UbxTeam/microblx

Create a source script (change the path if necessary, $HOME=/home/username):

	$ cd ..
	$ echo 'export UBX_ROOT=$HOME/microblx
	$ source $UBX_ROOT/env.sh
	$ export UBX_MODULES=$HOME/microblx/install/lib/ubx
	$ export CMAKE_PREFIX_PATH=$HOME/microblx/install/share/ubx/cmake' > sourceme.sh

To automatically source the microblx envrionment, add the following line in ~/.bashrc (change the path to yours):

	. /path/to/sourceme.sh

Make microblx:

	$ cd microblx
	$ make		# Don't use multiple core option -jn

###Running demo code

####Trig rnd to hexdump
Try an example script from the microblx directory:
	
	$ cd tools
	$ ./ubx_launch -c ../examples/trig_rnd_hexdump.usc -webif

Surf to <http://localhost:8888> to view the web-interface and initiate/start the blocks.

The default web page is ubx_node which gives an overview of the created blocks and the state of these blocks.

The desired functions are taken care by the computational blocks.
In this example, random hexadecimal values are generated once computational block rnd is triggered by ptrig1.

A computational block needs to be initialized before we can start it. 
In the initialization phase, the computation block obtains configuration parameters.

The user may start the block by clicking on the start button, running the block at specific triggering policy or the user may run the block in step mode by clicking on the steponce button.

####Node graph
The node graph is generated by microblx, which provides graphical representation of the current program.

Moreover, it provides status of every block and data buffer and the connections between these blocks.

* Computation block (c_block): Rectangle
* Interaction block (i_block): Dashed round-cornered rectangle
* (s_block?)
* Dataflow path: black arrow
* Triggering path: orange dashed arrow
* Running block: Green
* Stopped block: Red
* Not/Pre initialized block: Blue

The *webif1* block represents the web interface.

The *ptrig1* block will trigger rnd and logger1 in this order.

The *rnd* computation block has an output port rnd which is connected to the *hexdump* interaction block which prints the value of this output port to stdout.
The output port is also connected to *i_block* fifo1, a buffer with an output port *r2*.
